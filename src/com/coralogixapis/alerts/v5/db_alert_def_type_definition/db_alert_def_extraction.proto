syntax = "proto3";

package com.coralogixapis.alerts.v5;

/**
 *
 */
message MetricExtraction {
  string id = 1;
  string name = 2;
  map<string, Label> labels = 3;
  map<string, Metric> metrics = 4;
  map<string, Cardinality> cardinality = 5;
}

message Label {
  oneof label_type {
    ConstantString constant_value = 1;
    FieldValueString field_value = 2;
  }
}

message Metric {
  oneof metric_type {
    ConstantDouble constant_value = 1;
    FieldValueString field_value = 2;
  }
}

message Cardinality {
  oneof cardinality_type {
    ConstantString constant_value = 1;
    FieldValueString field_value = 2;
  }
}

/**
 * We capture the string value in a struct in case we need to add more fields in the future.
 */
message ConstantString {
  string value = 1;
}

/**
 * We capture the string value in a struct in case we need to add more fields in the future.
 */
message ConstantDouble {
  double value = 1;
}

/**
 * We capture the string value in a struct in case we need to add more fields in the future.
 */
message FieldValueString {
  string field_name = 1;
}
